#!/bin/bash

function download_artwork(){
 case "$2" in
  "fanart") URL=${searchTerms[20]};;
  "poster") URL=${searchTerms[19]};;
  *) URL=${searchTerms[19]};;
 esac
 echo -e "Downloading ${yellow} $2.jpg ${NC}..."
 wget --quiet -O "$1/$2.jpg" "$URL"
} #END download_artwork


function reuse_files() {
# echo -e "Searching ${yellow}$1 ${NC} for files..."

#Grab Poster and Fanart
  for i in poster fanart; do
   if [ -a "$1/$i.jpg" ]; then
	 `mv "$1/$i.jpg" "$tempPath"`
   else
	download_artwork "$tempPath" "$i"
   fi
  done

#Move existing SRT and named poster file
   if [ -a "$1/$3.srt" ]; then
    echo -e "Reusing ${yellow}SRT${nc} files..."
    mv "$1/$3.srt" "$tempPath/$3.srt"
   fi
   if [ -a "$1/$3.jpg" ]; then
    echo -e "Reusing ${yellow}JPG${nc} files..."
    mv "$1/$3.jpg" "$tempPath/$3.jpg"
   fi
#If there isn't a named poster file, create one
  if [ ! -a "$tempPath/$3.jpg" ]; then
 	cp "$tempPath/poster.jpg" "$tempPath/$3.jpg"
  fi
 
#delete old JSON and NFO
   if [ -e "$1/$3.json" ]; then
	rm "$1/$3.json"
   fi
   if [ -e "$1/$3.nfo" ]; then
        rm "$1/$3.nfo"
   fi

#grab new JSON
  movie_json=$(get_movie_json ${searchTerms[25]})
  echo "$movie_json" >> "$tempPath/$3.json"

#build an NFO file
newNFOfile=$(build_nfo "$3")

} #END reuse_files
