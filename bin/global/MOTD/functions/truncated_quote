#!/bin/bash

function truncated_quote(){
[ "$1" != "" ] && Q="$1" || Q="NO QUOTE FOUND."
QL=$(echo ${Q:$(expr index "$Q" "-")})
if [ "${2^^}" == "NUM" ]; then
  n=$(echo "$Q" |awk '{print $1}')
  if [ $n -lt 10 ] && [ ${#n} -lt 2 ]; then
    n="0$n"
  fi
  outString="$n"
else
[ "$2" == "" ] && fnd=1 || fnd="$2"
[ "$3" == "" ] && w=50 || w="$3"
SZ=$(echo "$QL" |fold -s -w$w|wc -l)
if [ $fnd -gt $SZ ]; then
 outString=" "
else
 outString=$(echo "$QL" |fold -s -w$w|head -$fnd|tail -1)
fi
#space at the end
 if [ "$outString" != "" ]; then
  while [ ${#outString} -lt $w ]; do
   outString="${outString} "
  done
 fi
fi #if $2 is NUM
echo "$outString"
} ## truncated_quote

if [ "$(basename $0)" == "truncated_quote" ]; then
 for f in ../lib/*.cfg; do [ -f $f ] && source $f; done
 for f in `ls`; do if [ -f $f ] && [ "$f" != "$(basename $0)" ]; then source $f;fi; done

 truncated_quote "$1" "$2" "$3"
fi

