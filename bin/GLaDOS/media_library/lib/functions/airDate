#!/bin/bash

function airDate(){
 stringZ="$1"
 stringZ=${stringZ/./\ }
 cutoff=`expr index "$stringZ" [^\(]`


### New while loop below
##if I found an open paren "(", then
# if [ $cutoff -gt 1 ]; then
#  #eliminate things like (Part 1) and (1).
#  oneup=${stringZ:$cutoff:1}
#  twoup=${stringZ:$(($cutoff+1)):1}
#   if [ "$oneup" = "P" ] || [ "$twoup" = ")" ] || [ "$oneup" = "p" ]; then
#    #move up to the next "("
#    newString=${stringZ:$cutoff}
#    newcut=`expr index "$newString" [^\(]`
#    if [ $newcut -gt 1 ]; then
#        cutoff=$(($cutoff+$newcut))
#    fi
#   fi
# fi

while [ "$cutoff" != "0" ]; do
 cutoff=`expr index "$stringZ" [^\(]`
 stringZ=${stringZ:$cutoff}
done

 stringZ="${stringZ:0:$((${#stringZ}-1))}"

 #now convert it to datetime
  stringZ=${stringZ/Jan/01}
  stringZ=${stringZ/Feb/02}
  stringZ=${stringZ/Mar/03}
  stringZ=${stringZ/Apr/04}
  stringZ=${stringZ/May/05}
  stringZ=${stringZ/Jun/06}
  stringZ=${stringZ/Jul/07}
  stringZ=${stringZ/Aug/08}
  stringZ=${stringZ/Sep/09}
  stringZ=${stringZ/Oct/10}
  stringZ=${stringZ/Nov/11}
  stringZ=${stringZ/Dec/12}

 d=${stringZ:0:2}
 m=${stringZ:3:2}
 y=${stringZ:6:2}
  if [ $y -gt 50 ]; then
        y="19$y"
  else
        y="20$y"
  fi

 echo "$y-$m-$d 00:00:00"
}

#airDate "$1"
