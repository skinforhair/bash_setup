#!/bin/bash

function display_matches(){
 IDS=$(echo "select id $4"|mysql $dbOptions)
 echo "$1 matches for $2 ($3): "
 c=1
 while [ $c -le $1 ]; do
  echo -n "$c : "
  case "$c" in
   1 ) echo -en "$IDS" |awk '{print $1}';;
   2 ) echo -en "$IDS" |awk '{print $2}';;
   3 ) echo -en "$IDS" |awk '{print $3}';;
   4 ) echo -en "$IDS" |awk '{print $4}';;
   5 ) echo -en "$IDS" |awk '{print $5}';;
   6 ) echo -en "$IDS" |awk '{print $6}';;
   7 ) echo -en "$IDS" |awk '{print $7}';;
  esac
  echo ""
  c=$((c+1))
 done
} #END display_matches


function similar_titles(){
 numResults=5
 inputTitle="$1"
 inputYear="$2"
 letterCount=3
 if [ "$inputYear" == "" ]; then
   andYear=
 else
   approxYear="${inputYear:0:3}"
   andYear=" and year LIKE '$approxYear%'"
 fi

while [ $letterCount -lt ${#inputTitle} ]; do
 Q1="from $movieTable where title like '${inputTitle:0:$letterCount}%'$andYear"
 QC=$(echo "select count(*) $Query"|mysql $dbOptions)
 if [ $QC -le $numResults ]; then
 case "$QC" in
   "0" ) echo "no Matches found for title=${inputTitle:0:$letterCount}$andYear"
         letterCount=$((${#inputTitle}+1))
         ;;
   * )	 display_matches "$QC" "$inputTitle" "$inputYear" "$Q1";;
 esac
  letterCount=$((${#inputTitle}+1))
 else
  letterCount=$((letterCount+1))
 fi
done
} #END similar_titles
