#!/bin/bash

input="$1"
 sz=0
pth="/shares/video/movies/"
icon="\\"
ct=0

function progressBar(){
   case "$icon" in
   "\\") icon="|";;
   "|") icon="/";;
   "/") icon="-";;
   "-") icon="\\";ct=$((ct+1));;
  esac
 stringZ=
 c=0; while [ $c -lt $ct ]; do stringZ=$stringZ"."; c=$((c+4)); done
 echo -en "\r$icon$stringZ"
} #progressBar

while read line; do
 nsz=$(du -s "$pth$line" |awk '{print $1}')
 sz=$(($sz+$nsz))
 progressBar
done <$input
echo ""
#echo "size is $sz"
available=$(du -s /shares/incoming/moviebox/movies/ |awk '{print $1}')
sz=$((sz-$available))

sz=$((sz/1024))
echo -n "$sz MB"
sz=$((sz/1024))
echo -n " -- $sz GB"
sz="$((sz/1024)).$((sz%1024))"
echo " -- $sz TB"

echo "Currently Available: $(df -h |grep moviebox|awk '{print $4}')"
