#!/bin/bash


function get_new_shows(){
today=$(date +"%m%d%Y")
showDIR="/root/.skinforhair_settings/bin/GLaDOS/media_library/tv_organizer/epguides/archive"
curFile="${showDIR}/available_episodes.txt.${today}"
stringZ=
if ! [ -f $curFile ]; then
  #32
  stringZ="${red}NO NEW EPISODES - File not Found${NC}"
else
 sta=0
 fin=0
 cnt=0
 while read line; do
  if [ "$line" == "---- Available ----" ]; then sta=1; fi
  if [ "$line" == "---- Upcoming ----" ]; then fin=1; fi
  if [ $sta -eq 1 ] && [ $fin -eq 0 ]; then
   [ "$line" != "" ] && cnt=$(($cnt+1))
  fi
 done<$curFile

 if [ "$1" != "simple" ]; then
  if [ $cnt -lt 10 ] && [ ${#cnt} -lt 2 ]; then cnt="0$cnt"; fi
  stringZ="${NC}[${yellow}$cnt${NC}] Episodes Ready to Download"
 else
  stringZ="$cnt"
 fi
fi #if file found
echo -en "$stringZ"
} ##get_new_shows
