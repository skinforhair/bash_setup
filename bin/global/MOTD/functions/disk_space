#!/bin/bash

function percentColor(){
 if [ ${1} -lt 40 ]; then
  echo -en "${green}${1}%${NC}"
 elif [ ${1} -lt 78 ]; then
  echo -en "${yellow}${1}%${NC}"
 elif [ ${1} -lt 90 ]; then
  echo -en "${orange}${1}%${NC}"
 else
  echo -en "${red}${1}%${NC}"
 fi
} #percentColor

function print_disk(){ 
 ps=$(echo "$1" |awk '{print $5}')
  ps=${ps:0:$((${#ps}-1))}
 us=$(echo "$1" |awk '{print $4}')
 ts=$(echo "$1" |awk '{print $2}')
 
 pb=$(echo "$2" |awk '{print $5}')
  pb=${pb:0:$((${#pb}-1))}
 ub=$(echo "$2" |awk '{print $4}')
 tb=$(echo "$2" |awk '{print $2}')

 case "$4" in
 "mirror") [ "$ps" != "$pb" ] && stringZ="${red}${3}${NC}" || stringZ="${green}${3}${NC}";;
 "perc") stringZ=$(percentColor $ps);;
 "used") stringZ="${NC}${us}/${ts}";;
 *) stringZ=;;
 esac
echo -en " $stringZ"
} ##print_disk

function glados_disks(){
 if [ "$1" == "mirror" ] || [ "$2" == "mirror" ] || [ "$3" == "mirror" ]; then mirror=1;else mirror=0;fi
 if [ "$1" == "perc" ] || [ "$2" == "perc" ] || [ "$3" == "perc" ]; then perc=1;else perc=0;fi
 if [ "$1" == "used" ] || [ "$2" == "used" ] || [ "$3" == "used" ]; then used=1;else used=0;fi
 if [ "$1" == "simple" ] || [ "$2" == "simple" ] || [ "$3" == "simple" ]; then simple=1;else simple=0;fi
 SHARES=$(df -h |grep shares |grep -v "shares/")
bSHARES=$(df -h |grep backup |grep -v "backup/")
stringA=

 MOVIEDISK=$(df -h |grep movie|grep share)
bMOVIEDISK=$(df -h |grep movie|grep backup)
stringB=

 TVDISK=$(df -h |grep tv|grep share)
bTVDISK=$(df -h |grep tv|grep backup)
stringC=

if [ "$mirror" == "1" ]; then
 stringA=${stringA}$(print_disk "$SHARES" "$bSHARES" "Shares" "mirror")
 stringB=${stringB}$(print_disk "$MOVIEDISK" "$bMOVIEDISK" "Movies" "mirror")
 stringC=${stringC}$(print_disk "$TVDISK" "$bTVDISK" "TV" "mirror")
fi
if [ "$perc" == "1" ]; then
 stringA=${stringA}$(print_disk "$SHARES" "$bSHARES" "Shares" "perc")
 stringB=${stringB}$(print_disk "$MOVIEDISK" "$bMOVIEDISK" "Movies" "perc")
 stringC=${stringC}$(print_disk "$TVDISK" "$bTVDISK" "TV" "perc")
fi
if [ "$used" == "1" ]; then
 stringA=${stringA}$(print_disk "$SHARES" "$bSHARES" "Shares" "used")
 stringB=${stringB}$(print_disk "$MOVIEDISK" "$bMOVIEDISK" "Movies" "used")
 stringC=${stringC}$(print_disk "$TVDISK" "$bTVDISK" "TV" "used")
fi

if [ "$simple" == "1" ]; then
 case "${3,,}" in
 "shares") echo -en "$stringA";;
 "movies") echo -en "$stringB";;
 "tv") echo -en "$stringC";;
 esac
else
 echo -en "$stringA$(SP 5)$stringB$(SP 5)$stringC"
fi
} ##glados_disks

