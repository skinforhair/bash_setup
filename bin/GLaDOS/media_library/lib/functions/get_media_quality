#!/bin/bash

function get_media_quality() {
     MI=`/usr/bin/mediainfo "$1" |grep Height |awk '{print $3}'`
	if [ $MI -lt 10 ]; then
		p=`/usr/bin/mediainfo "$1" |grep Height |awk '{print $4}'`
		MI=$MI$p
	fi
	size="$MI"
     #IFS=$" " read -a MediaSize <<< "$MI"
     #size=`echo "${MediaSize[2]}"`
       #echo -en "${yellow}height is $size${NC}. "
         if [ "$size" == "" ]; then
            echo "SD"
         #elif [ "$size" == "1" ]; then
         #   echo "1080p"
         elif [ "$size" -lt "$SD" ]; then
            echo "SD"
         elif [ "$size" -lt "$DVD" ]; then
            echo "DVD"
         elif [ "$size" -lt "$HD_720" ]; then
            echo "720p"
         else
            echo "1080p"
         fi
}

function get_media_type() {
     MI=`/usr/bin/mediainfo "$1" |grep Format`
     IFS=$" " read -a MediaSize <<< "$MI"
     format=`echo "${MediaSize[2]}"`
     format=`echo ${format,,}`
     case "$format" in
	"mpeg-4" | "mp4" | "m4v" ) echo "mp4";;
	"mkv" | "matroska" ) echo "mkv";;
	"avi" ) echo "avi";;
     esac
}



function get_media_length(){
hours="00"
minutes="00"
seconds="00"

    MI=`/usr/bin/mediainfo "$1" |grep Duration |head -1`
    IFS=$" " read -a MediaSize <<< "$MI"

    firstnum=`echo "${MediaSize[2]}"`
    secondnum=`echo "${MediaSize[4]}"`
    firstdelim=`echo "${MediaSize[3]}"`
    seconddelim=`echo "${MediaSize[5]}"`

    case "$firstdelim" in
     "h"|"hr" ) hours="$firstnum";;
     "m"|"min") minutes="$firstnum";;
     "s"|"sec") seconds="$firstnum";;
    esac
    case "$seconddelim" in
     "h"|"hr" ) hours="$secondnum";;
     "m"|"min") minutes="$secondnum";;
     "s"|"sec") seconds="$secondnum";;
    esac

    if [ $hours -lt 10 ] && [ ${#hours} -lt 2 ]; then
      hours="0$hours"
    fi
    if [ $minutes -lt 10 ] && [ ${#minutes} -lt 2 ]; then
      minutes="0$minutes"
    fi
    if [ $seconds -lt 10 ] && [ ${#seconds} -lt 2 ]; then
      seconds="0$seconds"
    fi

echo "$hours:$minutes:$seconds"
}
