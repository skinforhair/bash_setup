#!/bin/bash


cleaner(){
 stringZ="$1"
 stringZ=`echo "$stringZ" |sed "s;';'';g"`
 stringZ=`echo "$stringZ" |sed "s;--;-;g"`
 stringZ=`echo "$stringZ" |sed 's;";-;g'`
echo "$stringZ"
} #END string_cleaner

function update_database() {
if [ "$1" == "0" ] || [ "$1" == "" ]; then
 stringQ="INSERT into $dbName.$movieTable(
id ,
imdb_id ,
tmdb_id ,
title ,
year ,
runtime ,
mpaa ,
plot ,
tagline ,
actors ,
characters ,
crew_jobs ,
crew_names ,
releasedate ,
genres ,
keywords ,
poster_path ,
backdrop_path ,
added ,
filetype ,
filesize ,
video_quality ,
local_path ,
url_path ,
set_id ,
set_num ,
superset_id ,
tags
)
VALUES
(NULL,
\"$(cleaner "${searchTerms[24]}")\",
\"$(cleaner "${searchTerms[25]}")\",
\"$(cleaner "${searchTerms[0]}")\",
\"$(cleaner "${searchTerms[1]}")\",
\"$(cleaner "${searchTerms[8]}")\",
\"$(cleaner "${searchTerms[9]}")\",
\"$(cleaner "${searchTerms[10]}")\",
\"$(cleaner "${searchTerms[11]}")\",
\"$(cleaner "${searchTerms[12]}")\",
\"$(cleaner "${searchTerms[13]}")\",
\"$(cleaner "${searchTerms[14]}")\",
\"$(cleaner "${searchTerms[15]}")\",
\"$(cleaner "${searchTerms[16]}")\",
\"$(cleaner "${searchTerms[17]}")\",
\"$(cleaner "${searchTerms[18]}")\",
\"$(cleaner "${searchTerms[19]}")\",
\"$(cleaner "${searchTerms[20]}")\",
CURRENT_TIMESTAMP,
\"$(cleaner "${searchTerms[2]}")\",
\"$(cleaner "${searchTerms[3]}")\",
\"$(cleaner "${searchTerms[4]}")\",
\"$(cleaner "${searchTerms[21]}")\",
\"$(cleaner "${searchTerms[22]}")\",
\"$(cleaner "${searchTerms[6]}")\",
\"$(cleaner "${searchTerms[7]}")\",
\"$(cleaner "${searchTerms[5]}")\"
\"$(cleaner "${searchTerms[26]}")\"
);"
else
 stringQ="UPDATE $movieTable SET
imdb_id = '$(cleaner "${searchTerms[24]}")',
tmdb_id = '$(cleaner "${searchTerms[25]}")',
title = '$(cleaner "${searchTerms[0]}")',
year = '$(cleaner "${searchTerms[1]}")',
runtime = '$(cleaner "${searchTerms[8]}")',
mpaa = '$(cleaner "${searchTerms[9]}")',
plot = '$(cleaner "${searchTerms[10]}")',
tagline = '$(cleaner "${searchTerms[11]}")',
actors = '$(cleaner "${searchTerms[12]}")',
characters = '$(cleaner "${searchTerms[13]}")',
crew_jobs = '$(cleaner "${searchTerms[14]}")',
crew_names = '$(cleaner "${searchTerms[15]}")',
releasedate = '$(cleaner "${searchTerms[16]}")',
genres = '$(cleaner "${searchTerms[17]}")',
keywords = '$(cleaner "${searchTerms[18]}")',
poster_path = '$(cleaner "${searchTerms[19]}")',
backdrop_path = '$(cleaner "${searchTerms[20]}")',
filetype = '$(cleaner "${searchTerms[2]}")',
filesize = '$(cleaner "${searchTerms[3]}")',
video_quality = '$(cleaner "${searchTerms[4]}")',
local_path = '$(cleaner "${searchTerms[21]}")',
url_path = '$(cleaner "${searchTerms[22]}")',
set_id = '$(cleaner "${searchTerms[6]}")',
set_num = '$(cleaner "${searchTerms[7]}")',
superset_id = '$(cleaner "${searchTerms[5]}")'
tags = '$(cleaner "${searchTerms[26]}")'
WHERE id = $1;"

fi	
#echo -e "${yellow} $stringQ ${NC}"
 echo "$stringQ" |mysql $dbOptions
} #END update_database
